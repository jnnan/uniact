<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UniAct Framework</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            /* CHANGED: Background is now transparent for embedding */
            background: transparent; 
            min-height: 100vh;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .container {
            max-width: 1500px;
            width: 100%;
        }

        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 10px;
            font-size: 2.8em;
            /* Optional: Text shadow to ensure readability on variable backgrounds */
            text-shadow: 0 2px 10px rgba(255,255,255,0.5);
        }

        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 40px;
            font-size: 1.3em;
             /* Optional: Text shadow */
             text-shadow: 0 1px 5px rgba(255,255,255,0.5);
        }

        .framework {
            display: flex;
            align-items: stretch; 
            justify-content: space-between;
            gap: 12px;
            padding: 25px;
            
            /* CHANGED: Removed background color and border to remove the "White Box" */
            background: transparent;
            border: none;
            
            border-radius: 20px;
            position: relative;
            overflow: hidden;
            min-height: 550px;
        }

        /* Token Flow Layer */
        .token-flow-layer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            overflow: hidden;
            z-index: 0;
        }

        .flowing-token {
            position: absolute;
            width: 14px;
            height: 14px;
            border-radius: 4px;
            opacity: 0.85;
            animation: flowAcross 4s linear infinite;
        }

        .flowing-token.red { background: #ff6b6b; box-shadow: 0 0 10px rgba(255, 107, 107, 0.6); }
        .flowing-token.green { background: #51cf66; box-shadow: 0 0 10px rgba(81, 207, 102, 0.6); }
        .flowing-token.yellow { background: #ffd43b; box-shadow: 0 0 10px rgba(255, 212, 59, 0.6); }
        .flowing-token.blue { background: #339af0; box-shadow: 0 0 10px rgba(51, 154, 240, 0.6); }

        @keyframes flowAcross {
            0% {
                left: -20px;
                opacity: 0;
                transform: scale(0.5);
            }
            10% {
                opacity: 0.9;
                transform: scale(1);
            }
            90% {
                opacity: 0.9;
                transform: scale(1);
            }
            100% {
                left: calc(100% + 20px);
                opacity: 0;
                transform: scale(0.5);
            }
        }

        .input-modalities {
            display: flex;
            flex-direction: column;
            gap: 12px;
            z-index: 10;
            justify-content: center;
        }

        .modality {
            display: flex;
            align-items: center;
            gap: 12px;
            animation: slideIn 0.8s ease-out forwards;
            opacity: 0;
        }

        .modality:nth-child(1) { animation-delay: 0.1s; }
        .modality:nth-child(2) { animation-delay: 0.2s; }
        .modality:nth-child(3) { animation-delay: 0.3s; }
        .modality:nth-child(4) { animation-delay: 0.4s; }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(-50px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .modality-block {
            width: 200px;
            padding: 18px 15px;
            border-radius: 12px;
            color: white;
            font-weight: bold;
            text-align: center;
            position: relative;
            overflow: hidden;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .modality-block:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .modality-block::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.2), transparent);
            transform: rotate(45deg);
            animation: shimmer 3s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%) rotate(45deg); }
            100% { transform: translateX(100%) rotate(45deg); }
        }

        .language { background: linear-gradient(135deg, #ff6b6b, #ee5a5a); }
        .music { background: linear-gradient(135deg, #51cf66, #40c057); }
        .trajectory { background: linear-gradient(135deg, #ffd43b, #fab005); color: #333; }
        .motion { background: linear-gradient(135deg, #339af0, #228be6); }

        .modality-icon {
            font-size: 1.8em;
            margin-bottom: 5px;
        }

        .modality-title {
            font-size: 1.2em;
            margin-bottom: 6px;
        }

        .modality-content {
            font-size: 0.85em;
            opacity: 0.9;
            font-weight: normal;
            line-height: 1.3;
        }

        .encoder-box {
            background: linear-gradient(135deg, #7950f2, #6741d9);
            padding: 12px 18px;
            border-radius: 8px;
            color: white;
            font-weight: bold;
            font-size: 0.95em;
            writing-mode: vertical-rl;
            text-orientation: mixed;
            height: 90px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 15px rgba(121, 80, 242, 0.3);
            text-align: center;
        }

        .center-column {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 10;
        }

        .token-pool {
            background: #fff;
            border: 3px solid #e0e0e0;
            border-radius: 15px;
            padding: 20px 15px;
            min-width: 160px;
            text-align: center;
            position: relative;
            z-index: 10;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            animation: fadeIn 1s ease-out 0.5s forwards;
            opacity: 0;
            display: flex;
            flex-direction: column;
            justify-content: center;
            height: 100%;
        }

        @keyframes fadeIn {
            to { opacity: 1; }
        }

        .token-pool-header {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            margin-bottom: 6px;
        }

        .pool-icon {
            width: 28px;
            height: 28px;
        }

        .token-pool h3 {
            color: #333;
            font-size: 1.05em;
        }

        .token-pool-subtitle {
            color: #666;
            font-size: 0.8em;
            margin-bottom: 12px;
        }

        .token-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 5px;
            justify-items: center;
            margin-bottom: 12px;
        }

        .token {
            width: 20px;
            height: 20px;
            border-radius: 4px;
            animation: tokenPulse 2s ease-in-out infinite;
        }

        .token:nth-child(odd) { animation-delay: 0.5s; }

        @keyframes tokenPulse {
            0%, 100% { transform: scale(1); opacity: 0.8; }
            50% { transform: scale(1.1); opacity: 1; }
        }

        .token.red { background: #ff6b6b; }
        .token.green { background: #51cf66; }
        .token.yellow { background: #ffd43b; }
        .token.blue { background: #339af0; }

        .token-legend {
            display: flex;
            flex-direction: column;
            gap: 4px;
            margin-top: 8px;
            padding-top: 10px;
            border-top: 1px solid #eee;
        }

        .token-legend-item {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 0.7em;
            color: #555;
        }

        .token-legend-color {
            width: 12px;
            height: 12px;
            border-radius: 3px;
            flex-shrink: 0;
        }

        .llm-box {
            background: linear-gradient(135deg, #495057, #343a40);
            border-radius: 20px;
            padding: 20px 15px;
            text-align: center;
            color: white;
            position: relative;
            z-index: 10;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.2);
            animation: scaleIn 0.8s ease-out 0.7s forwards;
            opacity: 0;
            transform: scale(0.8);
            display: flex;
            flex-direction: column;
            justify-content: center;
            height: 100%;
            min-width: 180px;
        }

        @keyframes scaleIn {
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .llm-icon {
            width: 60px;
            height: 60px;
            margin: 0 auto 10px;
            position: relative;
        }

        .llm-icon svg {
            width: 100%;
            height: 100%;
            animation: rotate3d 4s linear infinite;
        }

        @keyframes rotate3d {
            0% { transform: rotateY(0deg); }
            100% { transform: rotateY(360deg); }
        }

        .llm-box h3 {
            font-size: 1.1em;
            margin-bottom: 3px;
        }

        .llm-box > p {
            font-size: 0.85em;
            opacity: 0.8;
            margin-bottom: 12px;
        }

        /* Token IO Dynamics */
        .token-io-container {
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            padding: 12px 10px;
            margin-top: 8px;
        }

        .token-io-row {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            margin-bottom: 8px;
        }

        .token-io-row:last-child {
            margin-bottom: 0;
        }

        .token-io-label {
            font-size: 0.7em;
            opacity: 0.7;
            width: 35px;
            text-align: right;
        }

        .token-io-tokens {
            display: flex;
            gap: 3px;
        }

        .io-token {
            width: 14px;
            height: 14px;
            border-radius: 3px;
            animation: ioTokenFlow 1.5s ease-in-out infinite;
        }

        .io-token:nth-child(1) { animation-delay: 0s; }
        .io-token:nth-child(2) { animation-delay: 0.15s; }
        .io-token:nth-child(3) { animation-delay: 0.3s; }
        .io-token:nth-child(4) { animation-delay: 0.45s; }
        .io-token:nth-child(5) { animation-delay: 0.6s; }
        .io-token:nth-child(6) { animation-delay: 0.75s; }

        @keyframes ioTokenFlow {
            0%, 100% { opacity: 0.4; transform: scale(0.8); }
            50% { opacity: 1; transform: scale(1); }
        }

        .token-io-arrow {
            display: flex;
            justify-content: center;
            margin: 6px 0;
        }

        .token-io-arrow svg {
            width: 20px;
            height: 20px;
            animation: arrowPulse 1s ease-in-out infinite;
        }

        @keyframes arrowPulse {
            0%, 100% { opacity: 0.5; transform: translateY(0); }
            50% { opacity: 1; transform: translateY(2px); }
        }

        .decoder-section {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 12px;
            z-index: 10;
            animation: fadeIn 1s ease-out 0.9s forwards;
            opacity: 0;
            height: 100%;
        }

        .decoder-box {
            background: linear-gradient(135deg, #868e96, #495057);
            padding: 20px 15px;
            border-radius: 12px;
            color: white;
            text-align: center;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
            display: flex;
            flex-direction: column;
            justify-content: center;
            height: 100%;
            min-width: 180px;
        }

        .decoder-header {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            margin-bottom: 6px;
        }

        .decoder-icon {
            width: 28px;
            height: 28px;
        }

        .decoder-box h4 {
            font-size: 1.05em;
            margin: 0;
        }

        .decoder-box > p {
            font-size: 0.85em;
            opacity: 0.85;
            margin-bottom: 12px;
        }

        /* Causal Convolution Visualization */
        .causal-conv-container {
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            padding: 12px 10px;
            margin-bottom: 12px;
        }

        .causal-conv-label {
            font-size: 0.7em;
            opacity: 0.7;
            margin-bottom: 8px;
        }

        .causal-conv-grid {
            display: flex;
            flex-direction: column;
            gap: 3px;
        }

        .conv-row {
            display: flex;
            gap: 2px;
            justify-content: center;
        }

        .conv-cell {
            width: 16px;
            height: 16px;
            border-radius: 2px;
            background: rgba(255,255,255,0.25);
            position: relative;
        }

        .conv-cell.padding {
            background: rgba(80,80,80,0.6);
            border: 1px dashed rgba(255,255,255,0.3);
        }

        .conv-cell.active {
            background: rgba(255,255,255,0.5);
            animation: convPulse 2s ease-in-out infinite;
        }

        .conv-cell.kernel {
            background: #e9ecef;
            box-shadow: 0 0 6px rgba(255,255,255,0.6);
        }

        .conv-cell.output {
            background: #339af0;
            animation: outputPulse 1.5s ease-in-out infinite;
        }

        @keyframes convPulse {
            0%, 100% { opacity: 0.6; }
            50% { opacity: 1; }
        }

        @keyframes outputPulse {
            0%, 100% { transform: scale(0.9); opacity: 0.7; }
            50% { transform: scale(1); opacity: 1; }
        }

        .conv-legend {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 8px;
            font-size: 0.6em;
            opacity: 0.8;
        }

        .conv-legend-item {
            display: flex;
            align-items: center;
            gap: 3px;
        }

        .conv-legend-color {
            width: 10px;
            height: 10px;
            border-radius: 2px;
        }

        .streaming-tokens {
            display: flex;
            gap: 6px;
            margin-top: 10px;
            justify-content: center;
        }

        .stream-token {
            width: 24px;
            height: 24px;
            background: linear-gradient(135deg, #339af0, #228be6);
            border-radius: 5px;
            animation: streamFlow 1s ease-in-out infinite;
        }

        .stream-token:nth-child(1) { animation-delay: 0s; }
        .stream-token:nth-child(2) { animation-delay: 0.15s; }
        .stream-token:nth-child(3) { animation-delay: 0.3s; }
        .stream-token:nth-child(4) { animation-delay: 0.45s; }
        .stream-token:nth-child(5) { animation-delay: 0.6s; }

        @keyframes streamFlow {
            0%, 100% { opacity: 0.3; transform: scale(0.9); }
            50% { opacity: 1; transform: scale(1); }
        }

        .streaming-label {
            color: rgba(255,255,255,0.8);
            font-size: 0.8em;
            margin-top: 8px;
        }

        /* 
           ROBOT SECTION STYLES 
           Refactored for compactness and vertical centering
        */
        .robot-section {
            text-align: center;
            z-index: 10;
            animation: fadeIn 1s ease-out 1.1s forwards;
            opacity: 0;
            display: flex;
            flex-direction: column;
            min-width: 160px;
        }

        .robot-container {
            background: linear-gradient(135deg, #339af0, #228be6);
            border-radius: 15px;
            padding: 20px 15px;
            position: relative;
            box-shadow: 0 8px 30px rgba(51, 154, 240, 0.3);
            
            /* Fill height */
            flex: 1;
            display: flex;
            flex-direction: column;
            
            /* Center content vertically and keep it compact */
            justify-content: center;
            align-items: center;
            gap: 10px; /* Compact spacing */
            
            width: 100%;
        }

        .robot-title {
            color: white;
            font-size: 1.1em;
            font-weight: bold;
            margin-bottom: 0;
            display: flex;
            align-items: center;
            gap: 8px; /* Spacing between icon and text */
        }

        .robot-title-icon {
            width: 24px;
            height: 24px;
            fill: none;
            stroke: white;
            stroke-width: 2.5;
        }

        .robot-subtitle {
            color: rgba(255,255,255,0.85);
            font-size: 0.85em;
            margin-bottom: 5px; /* Slight extra spacing after subtitle */
        }

        /* Robot Figure */
        .robot-figure {
            display: flex;
            justify-content: center;
            align-items: center;
            /* No flex: 1, so it doesn't expand to fill space */
            flex: 0 0 auto; 
            padding: 5px 0;
            transform: scale(0.95); /* Slightly compact figure */
        }

        .robot-body {
            position: relative;
            width: 70px;
            height: 140px;
        }

        .robot-head {
            width: 28px;
            height: 28px;
            background: white;
            border-radius: 50%;
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            animation: headBob 1s ease-in-out infinite;
        }

        @keyframes headBob {
            0%, 100% { transform: translateX(-50%) translateY(0); }
            50% { transform: translateX(-50%) translateY(-3px); }
        }

        .robot-torso {
            width: 36px;
            height: 48px;
            background: white;
            border-radius: 6px;
            position: absolute;
            top: 32px;
            left: 50%;
            transform: translateX(-50%);
        }

        .robot-arm {
            width: 10px;
            height: 42px;
            background: white;
            border-radius: 5px;
            position: absolute;
            top: 34px;
            transform-origin: top center;
        }

        .robot-arm.left {
            left: 2px;
            animation: armSwingLeft 1.2s ease-in-out infinite;
        }

        .robot-arm.right {
            right: 2px;
            animation: armSwingRight 1.2s ease-in-out infinite;
        }

        @keyframes armSwingLeft {
            0%, 100% { transform: rotate(-20deg); }
            50% { transform: rotate(30deg); }
        }

        @keyframes armSwingRight {
            0%, 100% { transform: rotate(20deg); }
            50% { transform: rotate(-30deg); }
        }

        .robot-leg {
            width: 12px;
            height: 52px;
            background: white;
            border-radius: 6px;
            position: absolute;
            top: 82px;
            transform-origin: top center;
        }

        .robot-leg.left {
            left: 18px;
            animation: legSwingLeft 1.2s ease-in-out infinite;
        }

        .robot-leg.right {
            right: 18px;
            animation: legSwingRight 1.2s ease-in-out infinite;
        }

        @keyframes legSwingLeft {
            0%, 100% { transform: rotate(15deg); }
            50% { transform: rotate(-15deg); }
        }

        @keyframes legSwingRight {
            0%, 100% { transform: rotate(-15deg); }
            50% { transform: rotate(15deg); }
        }

        .motion-label {
            color: rgba(255,255,255,0.9);
            font-size: 0.8em;
            padding-top: 5px;
        }

        /* DoF Display */
        .dof-display {
            background: rgba(255,255,255,0.15);
            border-radius: 8px;
            padding: 8px;
            margin-top: 5px;
        }

        .dof-label {
            font-size: 0.7em;
            opacity: 0.8;
            margin-bottom: 5px;
            color: white;
        }

        .dof-values {
            display: flex;
            flex-wrap: wrap;
            gap: 3px;
            justify-content: center;
        }

        .dof-value {
            width: 18px;
            height: 18px;
            background: rgba(255,255,255,0.9);
            border-radius: 3px;
            font-size: 0.5em;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #228be6;
            font-weight: bold;
            animation: dofUpdate 2s ease-in-out infinite;
        }

        .dof-value:nth-child(odd) { animation-delay: 0.5s; }

        @keyframes dofUpdate {
            0%, 100% { opacity: 0.7; }
            50% { opacity: 1; }
        }

        /* Flow Arrows */
        .flow-arrow {
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10;
            position: relative;
            align-self: center;
        }

        .arrow-container {
            width: 45px;
            height: 40px;
            position: relative;
            display: flex;
            align-items: center;
        }

        .arrow-line {
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, #ccc, #aaa);
            position: relative;
            border-radius: 2px;
        }

        .arrow-line::after {
            content: '';
            position: absolute;
            right: -10px;
            top: 50%;
            transform: translateY(-50%);
            border: 10px solid transparent;
            border-left: 14px solid #aaa;
        }

        .arrow-token {
            position: absolute;
            width: 12px;
            height: 12px;
            border-radius: 4px;
            animation: arrowTokenFlow 1.5s linear infinite;
        }

        .arrow-token:nth-child(2) { animation-delay: 0.5s; }
        .arrow-token:nth-child(3) { animation-delay: 1s; }

        @keyframes arrowTokenFlow {
            0% { left: 0; opacity: 0; }
            20% { opacity: 1; }
            80% { opacity: 1; }
            100% { left: calc(100% - 12px); opacity: 0; }
        }
    </style>
</head>
<body>
    <div class="container">
        
        <div class="framework">
            <!-- Token Flow Layer -->
            <div class="token-flow-layer" id="tokenFlowLayer"></div>

            <!-- Input Modalities -->
            <div class="input-modalities">
                <div class="modality">
                    <div class="modality-block language">
                        <div class="modality-icon">üí¨</div>
                        <div class="modality-title">Language</div>
                        <div class="modality-content">
                            "Wave to a friend"<br>
                            "Practice martial arts"
                        </div>
                    </div>
                    <div class="encoder-box">FSQ Tokenizer</div>
                </div>
                
                <div class="modality">
                    <div class="modality-block music">
                        <div class="modality-icon">üéµ</div>
                        <div class="modality-title">Music</div>
                        <div class="modality-content">
                            Audio waveforms<br>
                            Rhythm patterns
                        </div>
                    </div>
                    <div class="encoder-box">FSQ Tokenizer</div>
                </div>
                
                <div class="modality">
                    <div class="modality-block trajectory">
                        <div class="modality-icon">üìç</div>
                        <div class="modality-title">Trajectory</div>
                        <div class="modality-content">
                            Path waypoints<br>
                            Navigation goals
                        </div>
                    </div>
                    <div class="encoder-box">FSQ Tokenizer</div>
                </div>
                
                <div class="modality">
                    <div class="modality-block motion">
                        <div class="modality-icon">üèÉ</div>
                        <div class="modality-title">Motion</div>
                        <div class="modality-content">
                            Human pose data<br>
                            Movement sequences
                        </div>
                    </div>
                    <div class="encoder-box">FSQ Tokenizer</div>
                </div>
            </div>

            <!-- Arrow with flowing tokens -->
            <div class="flow-arrow">
                <div class="arrow-container">
                    <div class="arrow-line"></div>
                    <div class="arrow-token" style="background: #ff6b6b;"></div>
                    <div class="arrow-token" style="background: #51cf66;"></div>
                    <div class="arrow-token" style="background: #ffd43b;"></div>
                </div>
            </div>

            <!-- Common Token Pool -->
            <div class="center-column">
                <div class="token-pool">
                    <div class="token-pool-header">
                        <svg class="pool-icon" viewBox="0 0 100 100" fill="none">
                            <!-- Pool shape -->
                            <ellipse cx="50" cy="70" rx="42" ry="20" fill="#e3f2fd" stroke="#64b5f6" stroke-width="3"/>
                            <ellipse cx="50" cy="60" rx="42" ry="20" fill="#bbdefb" stroke="#64b5f6" stroke-width="3"/>
                            <ellipse cx="50" cy="50" rx="42" ry="20" fill="#90caf9" stroke="#42a5f5" stroke-width="3"/>
                            <!-- Tokens floating in pool -->
                            <circle cx="35" cy="48" r="6" fill="#ff6b6b"/>
                            <circle cx="50" cy="45" r="6" fill="#51cf66"/>
                            <circle cx="65" cy="48" r="6" fill="#ffd43b"/>
                            <circle cx="50" cy="55" r="6" fill="#339af0"/>
                        </svg>
                        <h3>Shared Token Pool</h3>
                    </div>
                    <p class="token-pool-subtitle">Common Code Embedding Space</p>
                    <div class="token-grid">
                        <div class="token red"></div>
                        <div class="token green"></div>
                        <div class="token yellow"></div>
                        <div class="token blue"></div>
                        <div class="token blue"></div>
                        <div class="token blue"></div>
                        <div class="token red"></div>
                        <div class="token yellow"></div>
                        <div class="token green"></div>
                        <div class="token red"></div>
                        <div class="token green"></div>
                        <div class="token yellow"></div>
                        <div class="token red"></div>
                        <div class="token blue"></div>
                        <div class="token green"></div>
                        <div class="token yellow"></div>
                        <div class="token blue"></div>
                        <div class="token red"></div>
                        <div class="token green"></div>
                        <div class="token yellow"></div>
                    </div>
                    <div class="token-legend">
                        <div class="token-legend-item">
                            <div class="token-legend-color" style="background: #ff6b6b;"></div>
                            <span>Language</span>
                        </div>
                        <div class="token-legend-item">
                            <div class="token-legend-color" style="background: #51cf66;"></div>
                            <span>Music</span>
                        </div>
                        <div class="token-legend-item">
                            <div class="token-legend-color" style="background: #ffd43b;"></div>
                            <span>Trajectory</span>
                        </div>
                        <div class="token-legend-item">
                            <div class="token-legend-color" style="background: #339af0;"></div>
                            <span>Motion</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Arrow with flowing tokens -->
            <div class="flow-arrow">
                <div class="arrow-container">
                    <div class="arrow-line"></div>
                    <div class="arrow-token" style="background: #339af0;"></div>
                    <div class="arrow-token" style="background: #ff6b6b;"></div>
                    <div class="arrow-token" style="background: #51cf66;"></div>
                </div>
            </div>

            <!-- Multimodal LLM -->
            <div class="center-column">
                <div class="llm-box">
                    <div class="llm-icon">
                        <svg viewBox="0 0 100 100">
                            <polygon points="50,5 95,27.5 95,72.5 50,95 5,72.5 5,27.5" 
                                     fill="none" stroke="#fff" stroke-width="3"/>
                            <polygon points="50,20 80,35 80,65 50,80 20,65 20,35" 
                                     fill="rgba(255,255,255,0.1)" stroke="#fff" stroke-width="2"/>
                            <circle cx="50" cy="50" r="12" fill="#fff"/>
                        </svg>
                    </div>
                    <h3>Multimodal LLM</h3>
                    <p>Unified Understanding</p>
                    
                    <div class="token-io-container">
                        <div class="token-io-row">
                            <span class="token-io-label">Input</span>
                            <div class="token-io-tokens">
                                <div class="io-token" style="background: #ff6b6b;"></div>
                                <div class="io-token" style="background: #51cf66;"></div>
                                <div class="io-token" style="background: #ffd43b;"></div>
                                <div class="io-token" style="background: #339af0;"></div>
                                <div class="io-token" style="background: #ff6b6b;"></div>
                                <div class="io-token" style="background: #339af0;"></div>
                            </div>
                        </div>
                        <div class="token-io-arrow">
                            <svg viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
                                <path d="M12 5v14M5 12l7 7 7-7"/>
                            </svg>
                        </div>
                        <div class="token-io-row">
                            <span class="token-io-label">Output</span>
                            <div class="token-io-tokens">
                                <div class="io-token" style="background: #339af0;"></div>
                                <div class="io-token" style="background: #339af0;"></div>
                                <div class="io-token" style="background: #339af0;"></div>
                                <div class="io-token" style="background: #339af0;"></div>
                                <div class="io-token" style="background: #339af0;"></div>
                                <div class="io-token" style="background: #339af0;"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Arrow with flowing tokens -->
            <div class="flow-arrow">
                <div class="arrow-container">
                    <div class="arrow-line"></div>
                    <div class="arrow-token" style="background: #339af0;"></div>
                    <div class="arrow-token" style="background: #339af0;"></div>
                    <div class="arrow-token" style="background: #339af0;"></div>
                </div>
            </div>

            <!-- Causal Decoder -->
            <div class="center-column">
                <div class="decoder-box">
                    <div class="decoder-header">
                        <svg class="decoder-icon" viewBox="0 0 100 100" fill="none">
                            <!-- Causal/temporal arrow icon -->
                            <rect x="10" y="40" width="20" height="20" rx="3" fill="white" opacity="0.5"/>
                            <rect x="35" y="40" width="20" height="20" rx="3" fill="white" opacity="0.7"/>
                            <rect x="60" y="40" width="20" height="20" rx="3" fill="white"/>
                            <!-- Forward arrows -->
                            <path d="M32 50 L33 50" stroke="white" stroke-width="2"/>
                            <path d="M57 50 L58 50" stroke="white" stroke-width="2"/>
                            <!-- Output arrow pointing down -->
                            <path d="M70 62 L70 78 L65 73 M70 78 L75 73" stroke="white" stroke-width="3" fill="none"/>
                            <!-- Time indicator -->
                            <path d="M15 30 L85 30" stroke="white" stroke-width="2" opacity="0.5"/>
                            <path d="M80 25 L85 30 L80 35" stroke="white" stroke-width="2" fill="none" opacity="0.5"/>
                        </svg>
                        <h4>Causal Decoder</h4>
                    </div>
                    <p>Frame-wise DoF Decoding</p>
                    
                    <div class="causal-conv-container">
                        <div class="causal-conv-label">Causal Convolution (k=3)</div>
                        <div class="causal-conv-grid" id="causalConvGrid">
                            <!-- Row 1: Time t-4 -->
                            <div class="conv-row">
                                <div class="conv-cell padding"></div>
                                <div class="conv-cell padding"></div>
                                <div class="conv-cell active"></div>
                                <div class="conv-cell"></div>
                                <div class="conv-cell"></div>
                                <div class="conv-cell"></div>
                                <div class="conv-cell"></div>
                                <div class="conv-cell"></div>
                            </div>
                            <!-- Row 2: Time t-3 -->
                            <div class="conv-row">
                                <div class="conv-cell padding"></div>
                                <div class="conv-cell active"></div>
                                <div class="conv-cell active"></div>
                                <div class="conv-cell"></div>
                                <div class="conv-cell"></div>
                                <div class="conv-cell"></div>
                                <div class="conv-cell"></div>
                                <div class="conv-cell"></div>
                            </div>
                            <!-- Row 3: Time t-2 -->
                            <div class="conv-row">
                                <div class="conv-cell active"></div>
                                <div class="conv-cell active"></div>
                                <div class="conv-cell active"></div>
                                <div class="conv-cell"></div>
                                <div class="conv-cell"></div>
                                <div class="conv-cell"></div>
                                <div class="conv-cell"></div>
                                <div class="conv-cell"></div>
                            </div>
                            <!-- Row 4: Current output -->
                            <div class="conv-row">
                                <div class="conv-cell output"></div>
                                <div class="conv-cell output"></div>
                                <div class="conv-cell output"></div>
                                <div class="conv-cell output"></div>
                                <div class="conv-cell output"></div>
                                <div class="conv-cell output"></div>
                                <div class="conv-cell output"></div>
                                <div class="conv-cell output"></div>
                            </div>
                        </div>
                        <div class="conv-legend">
                            <div class="conv-legend-item">
                                <div class="conv-legend-color" style="background: rgba(80,80,80,0.8); border: 1px dashed rgba(255,255,255,0.5);"></div>
                                <span>Pad</span>
                            </div>
                            <div class="conv-legend-item">
                                <div class="conv-legend-color" style="background: rgba(255,255,255,0.5);"></div>
                                <span>Input</span>
                            </div>
                            <div class="conv-legend-item">
                                <div class="conv-legend-color" style="background: #339af0;"></div>
                                <span>Output</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="streaming-tokens">
                        <div class="stream-token"></div>
                        <div class="stream-token"></div>
                        <div class="stream-token"></div>
                        <div class="stream-token"></div>
                        <div class="stream-token"></div>
                    </div>
                    <div class="streaming-label">Real-time Streaming ‚Üí</div>
                </div>
            </div>

            <!-- Arrow with flowing tokens -->
            <div class="flow-arrow">
                <div class="arrow-container">
                    <div class="arrow-line"></div>
                    <div class="arrow-token" style="background: #339af0;"></div>
                    <div class="arrow-token" style="background: #339af0;"></div>
                    <div class="arrow-token" style="background: #339af0;"></div>
                </div>
            </div>

            <!-- Robot / Motion Tracker -->
            <div class="robot-section">
                <div class="robot-container">
                    <div class="robot-title">
                        <svg class="robot-title-icon" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <!-- The "Target" (Ghost) -->
                            <circle cx="7" cy="5" r="2" opacity="0.5" />
                            <path d="M7 7v7" opacity="0.5" /> <!-- Body -->
                            <path d="M4 9l3-2 3 2" opacity="0.5" /> <!-- Arms -->
                            <path d="M5 19l2-5 2 5" opacity="0.5" /> <!-- Legs -->

                            <!-- The "Imitator" (Solid) -->
                            <circle cx="17" cy="5" r="2" />
                            <path d="M17 7v7" />
                            <path d="M14 9l3-2 3 2" />
                            <path d="M15 19l2-5 2 5" />
                            
                            <!-- Sync/Imitate Arrow -->
                            <path d="M10 12h4m-1-2l3 2-3 2" stroke-width="1.5" />
                        </svg>
                        Motion Tracker
                    </div>
                    <div class="robot-subtitle">Humanoid Robot Control</div>
                    
                    <div class="robot-figure">
                        <!-- Main Robot Figure -->
                        <div class="robot-body">
                            <div class="robot-head"></div>
                            <div class="robot-torso"></div>
                            <div class="robot-arm left"></div>
                            <div class="robot-arm right"></div>
                            <div class="robot-leg left"></div>
                            <div class="robot-leg right"></div>
                        </div>
                    </div>
                    
                    <div class="dof-display">
                        <div class="dof-label">Joint DoF Values (29 dims)</div>
                        <div class="dof-values" id="dofValues">
                            <!-- Generated by JS -->
                        </div>
                    </div>
                    
                    <div class="motion-label">Robot Motion Output</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Create flowing tokens across the entire framework
        const tokenFlowLayer = document.getElementById('tokenFlowLayer');
        const colors = ['red', 'green', 'yellow', 'blue'];
        const rows = [60, 150, 240, 330]; // Y positions for each modality row

        function createFlowingToken() {
            const token = document.createElement('div');
            token.className = 'flowing-token ' + colors[Math.floor(Math.random() * colors.length)];
            
            // Random row based on modality
            const rowIndex = Math.floor(Math.random() * rows.length);
            token.style.top = (rows[rowIndex] + Math.random() * 30 - 15) + 'px';
            
            // Randomize animation duration
            const duration = 3 + Math.random() * 2;
            token.style.animationDuration = duration + 's';
            
            tokenFlowLayer.appendChild(token);
            
            // Remove token after animation
            setTimeout(() => {
                token.remove();
            }, duration * 1000);
        }

        // Create tokens at regular intervals
        setInterval(createFlowingToken, 180);

        // Initial burst of tokens
        for (let i = 0; i < 20; i++) {
            setTimeout(createFlowingToken, i * 80);
        }

        // Add interactive hover effects
        document.querySelectorAll('.modality-block').forEach(block => {
            block.addEventListener('mouseenter', function() {
                this.style.transform = 'scale(1.08) rotate(1deg)';
            });
            block.addEventListener('mouseleave', function() {
                this.style.transform = 'scale(1) rotate(0deg)';
            });
        });

        // Animate tokens in the pool periodically
        setInterval(() => {
            const tokens = document.querySelectorAll('.token-grid .token');
            const randomToken = tokens[Math.floor(Math.random() * tokens.length)];
            randomToken.style.transform = 'scale(1.5)';
            randomToken.style.boxShadow = '0 0 15px currentColor';
            setTimeout(() => {
                randomToken.style.transform = 'scale(1)';
                randomToken.style.boxShadow = 'none';
            }, 300);
        }, 350);

        // Add glow effect to LLM box on hover
        const llmBox = document.querySelector('.llm-box');
        llmBox.addEventListener('mouseenter', function() {
            this.style.boxShadow = '0 0 50px rgba(100, 150, 200, 0.5)';
        });
        llmBox.addEventListener('mouseleave', function() {
            this.style.boxShadow = '0 8px 30px rgba(0, 0, 0, 0.2)';
        });

        // Pulse effect on robot container
        const robotContainer = document.querySelector('.robot-container');
        setInterval(() => {
            robotContainer.style.boxShadow = '0 8px 50px rgba(51, 154, 240, 0.5)';
            setTimeout(() => {
                robotContainer.style.boxShadow = '0 8px 30px rgba(51, 154, 240, 0.3)';
            }, 500);
        }, 2000);

        // Dynamic robot motion intensity based on token flow
        let tokenCount = 0;
        const originalInterval = setInterval(() => {
            tokenCount++;
            if (tokenCount % 10 === 0) {
                document.querySelectorAll('.robot-arm, .robot-leg').forEach(limb => {
                    limb.style.animationDuration = '0.8s';
                    setTimeout(() => {
                        limb.style.animationDuration = '1.2s';
                    }, 1000);
                });
            }
        }, 500);

        // Generate DoF values
        const dofContainer = document.getElementById('dofValues');
        for (let i = 0; i < 16; i++) {
            const dofVal = document.createElement('div');
            dofVal.className = 'dof-value';
            dofVal.textContent = (Math.random() * 2 - 1).toFixed(1);
            dofContainer.appendChild(dofVal);
        }

        // Animate DoF values
        setInterval(() => {
            const dofValues = document.querySelectorAll('.dof-value');
            dofValues.forEach(val => {
                val.textContent = (Math.random() * 2 - 1).toFixed(1);
            });
        }, 500);

        // Animate causal convolution - sliding window effect
        let convStep = 0;
        setInterval(() => {
            const rows = document.querySelectorAll('.conv-row');
            convStep = (convStep + 1) % 5;
            
            rows.forEach((row, rowIndex) => {
                const cells = row.querySelectorAll('.conv-cell');
                cells.forEach((cell, cellIndex) => {
                    if (rowIndex < 3) {
                        // Input rows - show sliding kernel
                        cell.classList.remove('kernel');
                        if (cellIndex >= convStep && cellIndex < convStep + 3 && !cell.classList.contains('padding')) {
                            cell.classList.add('kernel');
                        }
                    }
                });
            });
        }, 600);
    </script>
</body>
</html>